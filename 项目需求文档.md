# 大学生线上学习资源共享与问答系统 - 需求文档

## 一、项目概述

### 1.1 项目名称
大学生线上学习资源共享与问答系统

### 1.2 项目背景
为了方便大学生进行线上学习资源共享和师生互动问答，构建一个集课程管理、资源共享、在线答疑于一体的综合性学习平台。

### 1.3 技术栈

#### 后端技术栈
- **框架**: Spring Boot 3.x
- **数据库**: MySQL 8.0
- **ORM框架**: MyBatis-Plus
- **安全认证**: Spring Security + JWT
- **文件存储**: 本地存储 / 阿里云OSS（可选）
- **数据校验**: Hibernate Validator
- **API文档**: Knife4j (Swagger3)
- **构建工具**: Maven

#### 前端技术栈
- **框架**: Vue 3
- **语言**: JavaScript
- **UI组件库**: Element Plus
- **状态管理**: Pinia
- **路由**: Vue Router 4
- **HTTP客户端**: Axios
- **构建工具**: Vite

### 1.4 开发环境要求
- JDK 17+
- Node.js 16+
- MySQL 8.0+
- IDEA / VS Code

---

## 二、系统角色与权限

### 2.1 管理员 (Admin)
- **创建方式**: 系统初始化时创建
- **权限级别**: 最高权限
- **主要职责**: 系统维护、内容审核、用户管理

### 2.2 学生 (Student)
- **创建方式**: 自主注册
- **权限级别**: 普通用户
- **主要职责**: 学习资源浏览/上传、提问、下载资料

### 2.3 教师 (Teacher)
- **创建方式**: 管理员添加
- **权限级别**: 中级权限
- **主要职责**: 发布优质资源、回答学生问题、课程管理

---

## 三、功能需求详细说明

### 3.1 管理员功能模块

#### 3.1.1 课程管理
**功能描述**: 对系统中的课程进行全生命周期管理

**具体功能**:
- 新增课程
  - 课程名称（必填，50字符内）
  - 授课教师（下拉选择，可多选）
  - 课程内容描述（富文本，500字符内）
  - 开课学院（下拉选择）
  - 课程封面图片（可选）
  
- 编辑课程信息
- 删除课程（软删除，保留历史数据）
- 查询课程
  - 支持按课程名称、学院、教师模糊搜索
  - 分页显示，每页10-20条

**界面要求**:
- 表格列表展示
- 操作列包含：编辑、删除按钮
- 顶部包含：新增按钮、搜索框

#### 3.1.2 教师管理
**功能描述**: 管理教师账号及基本信息

**具体功能**:
- 新增教师账号
  - 用户名（必填，唯一）
  - 初始密码（系统生成或管理员设置）
  - 姓名（必填）
  - 邮箱（必填，唯一）
  - 手机号（可选）
  - 职称（下拉选择：助教、讲师、副教授、教授）
  - 个人简介（富文本，200字符内）
  
- 分配课程
  - 支持为教师分配多门课程
  - 可调整、移除已分配课程
  
- 编辑教师信息
- 禁用/启用教师账号
- 查询教师
  - 按姓名、职称、所授课程搜索
  - 分页显示

**界面要求**:
- 表格展示教师列表
- 操作列：编辑、分配课程、禁用/启用、删除
- 课程分配使用穿梭框组件

#### 3.1.3 学习资源管理
**功能描述**: 审核和管理平台上的所有学习资源

**具体功能**:
- 浏览所有学习资源
  - 按课程分类查看
  - 按上传时间、下载次数排序
  
- 删除违规资源
  - 提供删除原因说明
  - 通知上传者
  
- 编辑资源信息
  - 修正资源标题、简介
  - 调整资源所属课程分类

**界面要求**:
- 卡片式或列表式展示
- 支持预览功能
- 批量操作支持

#### 3.1.4 问答内容管理
**功能描述**: 监控和管理平台问答内容

**具体功能**:
- 查看所有问答
  - 按课程、时间、状态筛选
  - 显示问题、回答、提问者、回答者
  
- 删除不当内容
  - 删除违规问题
  - 删除不当回答
  - 记录删除原因
  
- 编辑内容
  - 修正错误信息
  - 标记优质问答

**界面要求**:
- 树形或列表展示问答关系
- 快速操作按钮
- 批量审核功能

---

### 3.2 学生功能模块

#### 3.2.1 用户注册与登录
**功能描述**: 学生自主注册并登录系统

**具体功能**:
- 用户注册
  - 用户名（唯一，6-20字符）
  - 密码（8-20字符，包含字母和数字）
  - 确认密码
  - 邮箱（用于找回密码）
  - 学号（必填，唯一）
  - 姓名（必填）
  - 所在学院（下拉选择）
  - 验证码验证
  
- 用户登录
  - 用户名/邮箱登录
  - 密码登录
  - 记住我功能
  - 忘记密码（邮箱找回）

**界面要求**:
- 简洁美观的登录注册页面
- 表单验证实时提示
- 响应式设计

#### 3.2.2 通知提醒
**功能描述**: 实时提醒学生的问题回复情况

**具体功能**:
- 消息通知
  - 顶部导航栏显示消息图标
  - 未读消息数量提示
  - 点击查看通知详情
  
- 通知类型
  - 问题被回答通知
  - 系统公告通知
  - 资源审核结果通知

**界面要求**:
- 下拉通知列表
- 未读标识
- 一键已读功能

#### 3.2.3 学习资料浏览
**功能描述**: 浏览和搜索学习资源

**具体功能**:
- 资源列表
  - 按课程分类浏览
  - 显示资源标题、简介、上传者、上传时间、下载次数
  
- 搜索功能
  - 关键字搜索（标题/内容）
  - 高级搜索（课程、文件类型、上传时间）
  - 搜索历史记录
  
- 排序功能
  - 按时间排序（最新、最早）
  - 按下载量排序

**界面要求**:
- 卡片式或列表式布局
- 左侧课程分类树
- 右侧资源列表
- 分页加载

#### 3.2.4 上传学习资料
**功能描述**: 学生上传自己的学习资源

**具体功能**:
- 文件上传
  - 支持格式：PDF、Word、Excel、PPT、图片、压缩包
  - 单文件大小限制：50MB
  - 拖拽上传支持
  
- 资源信息填写
  - 资源标题（必填，50字符内）
  - 资源简介（必填，500字符内）
  - 所属课程（下拉选择）
  - 资源标签（可多选或自定义）
  
- 上传记录
  - 上传时间自动记录
  - 上传进度显示
  - 上传历史查看

**界面要求**:
- 简洁的上传表单
- 文件预览功能
- 上传进度条

#### 3.2.5 查看资源详情
**功能描述**: 查看资源的详细信息并下载

**具体功能**:
- 详情信息
  - 资源标题、简介
  - 上传者信息
  - 上传时间
  - 下载次数
  - 文件大小、文件类型
  - 相关评论（可选）
  
- 操作功能
  - 下载资源
  - 举报资源（违规）
  - 分享资源链接

**界面要求**:
- 详情页面清晰展示
- 下载按钮醒目
- 在线预览（PDF、图片等）

#### 3.2.6 学生问答区
**功能描述**: 学生在课程下提问

**具体功能**:
- 提问功能
  - 选择所属课程
  - 问题标题（必填，100字符内）
  - 问题内容（富文本，1000字符内）
  - 上传图片附件（可选，最多3张）
  - 添加问题标签
  
- 问题列表
  - 按课程分类显示
  - 显示问题标题、提问者、提问时间、回答数
  - 已回答/未回答状态标识
  - 分页显示（每页15条）
  
- 问题详情
  - 查看问题完整内容
  - 查看所有回答
  - 点赞优质回答（可选）

**界面要求**:
- 类似论坛的问答界面
- 问题列表卡片式展示
- 富文本编辑器

#### 3.2.7 提问搜索
**功能描述**: 全站搜索问答内容

**具体功能**:
- 搜索条件
  - 关键字搜索（标题/内容）
  - 按学科筛选
  - 按教师筛选
  - 按回答状态筛选（已回答/未回答）
  
- 搜索结果
  - 高亮显示关键字
  - 显示匹配度排序
  - 搜索结果统计

**界面要求**:
- 综合搜索框
- 高级搜索折叠面板
- 搜索结果列表

#### 3.2.8 学生个人中心
**功能描述**: 管理个人信息、资源和问答

**具体功能**:
- 个人信息管理
  - 修改头像
  - 修改邮箱、手机号
  - 修改密码
  
- 我的资源
  - 查看已上传资源
  - 编辑资源信息
  - 删除资源
  - 资源下载统计
  
- 我的提问
  - 查看所有提问
  - 编辑未回答的问题
  - 删除问题
  - 查看问题回答
  
- 我的消息
  - 回答通知
  - 系统消息

**界面要求**:
- 左侧菜单导航
- 右侧内容区域
- Tab标签页切换

---

### 3.3 教师功能模块

#### 3.3.1 教师登录
**功能描述**: 教师使用管理员创建的账号登录

**具体功能**:
- 账号密码登录
- 首次登录强制修改密码
- 忘记密码（邮箱找回）

#### 3.3.2 新问题提醒
**功能描述**: 提醒教师课程下的新问题

**具体功能**:
- 消息提醒
  - 顶部导航显示："您所在课程有X条未回答问题"
  - 点击进入待回答问题列表
  
- 问题管理
  - 查看所授课程的所有未回答问题
  - 按课程、时间筛选
  - 标记紧急问题

**界面要求**:
- 醒目的提醒标识
- 快速跳转功能

#### 3.3.3 发布学习资料
**功能描述**: 教师上传高质量教学资源

**具体功能**:
- 资源上传
  - 资源标题（必填）
  - 资源说明（富文本）
  - 所属课程（下拉选择，只能选择自己所授课程）
  - 上传文件（PDF、PPT、Word、图片、视频等）
  - 单文件限制：100MB
  
- 可见性设置
  - 全部学生可见
  - 仅本课程学生可见
  - 指定班级可见（可选）
  
- 资源置顶
  - 设置重要资源置顶显示

**界面要求**:
- 简洁的发布表单
- 文件批量上传
- 发布预览功能

#### 3.3.4 回答学生问题
**功能描述**: 回答所授课程的学生提问

**具体功能**:
- 问题列表
  - 查看所有课程问题
  - 按课程筛选
  - 按时间排序
  - 已回答/未回答筛选
  
- 回答功能
  - 富文本回答
  - 上传图片附件（最多5张）
  - 回答时间自动记录
  
- 回答管理
  - 编辑自己的回答
  - 删除自己的回答
  - 查看回答反馈（点赞数等）

**界面要求**:
- 问题详情展示清晰
- 富文本编辑器
- 回答提交后确认提示

#### 3.3.5 教师个人中心
**功能描述**: 管理个人信息和教学内容

**具体功能**:
- 个人信息管理
  - 修改头像
  - 编辑个人简介
  - 修改联系方式
  - 修改密码
  
- 我的资源
  - 查看已发布资源
  - 编辑资源
  - 删除资源
  - 资源统计（下载量、浏览量）
  
- 我的回答
  - 查看所有回答记录
  - 编辑回答
  - 删除回答
  
- 课程管理
  - 查看所授课程
  - 查看课程学生列表
  - 课程数据统计

**界面要求**:
- 左侧菜单
- 数据可视化（图表统计）

---

## 四、数据库设计

### 4.1 核心数据表

#### 4.1.1 用户表 (sys_user)
```sql
CREATE TABLE sys_user (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',
    username VARCHAR(50) UNIQUE NOT NULL COMMENT '用户名',
    password VARCHAR(255) NOT NULL COMMENT '密码(加密)',
    real_name VARCHAR(50) NOT NULL COMMENT '真实姓名',
    email VARCHAR(100) UNIQUE COMMENT '邮箱',
    phone VARCHAR(20) COMMENT '手机号',
    avatar VARCHAR(255) COMMENT '头像URL',
    role ENUM('ADMIN', 'TEACHER', 'STUDENT') NOT NULL COMMENT '角色',
    status TINYINT DEFAULT 1 COMMENT '状态 1:启用 0:禁用',
    student_id VARCHAR(50) COMMENT '学号(学生)',
    college VARCHAR(100) COMMENT '学院',
    title ENUM('助教', '讲师', '副教授', '教授') COMMENT '职称(教师)',
    introduction TEXT COMMENT '个人简介',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    last_login_time DATETIME COMMENT '最后登录时间',
    INDEX idx_username (username),
    INDEX idx_email (email),
    INDEX idx_role (role)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户表';
```

#### 4.1.2 课程表 (course)
```sql
CREATE TABLE course (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',
    course_name VARCHAR(100) NOT NULL COMMENT '课程名称',
    course_code VARCHAR(50) UNIQUE COMMENT '课程编码',
    description TEXT COMMENT '课程描述',
    college VARCHAR(100) COMMENT '开课学院',
    cover_image VARCHAR(255) COMMENT '课程封面',
    status TINYINT DEFAULT 1 COMMENT '状态 1:启用 0:禁用',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_course_name (course_name),
    INDEX idx_college (college)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='课程表';
```

#### 4.1.3 教师课程关联表 (teacher_course)
```sql
CREATE TABLE teacher_course (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',
    teacher_id BIGINT NOT NULL COMMENT '教师ID',
    course_id BIGINT NOT NULL COMMENT '课程ID',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    UNIQUE KEY uk_teacher_course (teacher_id, course_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='教师课程关联表';
```

#### 4.1.4 学习资源表 (learning_resource)
```sql
CREATE TABLE learning_resource (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',
    title VARCHAR(200) NOT NULL COMMENT '资源标题',
    description TEXT COMMENT '资源简介',
    course_id BIGINT NOT NULL COMMENT '所属课程',
    uploader_id BIGINT NOT NULL COMMENT '上传者ID',
    uploader_type ENUM('TEACHER', 'STUDENT') NOT NULL COMMENT '上传者类型',
    file_name VARCHAR(255) NOT NULL COMMENT '文件名',
    file_path VARCHAR(500) NOT NULL COMMENT '文件路径',
    file_size BIGINT COMMENT '文件大小(字节)',
    file_type VARCHAR(50) COMMENT '文件类型',
    download_count INT DEFAULT 0 COMMENT '下载次数',
    visibility ENUM('ALL', 'COURSE') DEFAULT 'ALL' COMMENT '可见性',
    is_top TINYINT DEFAULT 0 COMMENT '是否置顶',
    status TINYINT DEFAULT 1 COMMENT '状态 1:正常 0:已删除',
    tags VARCHAR(500) COMMENT '标签(JSON数组)',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_course_id (course_id),
    INDEX idx_uploader_id (uploader_id),
    INDEX idx_create_time (create_time)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='学习资源表';
```

#### 4.1.5 问题表 (question)
```sql
CREATE TABLE question (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',
    title VARCHAR(200) NOT NULL COMMENT '问题标题',
    content TEXT NOT NULL COMMENT '问题内容',
    course_id BIGINT NOT NULL COMMENT '所属课程',
    student_id BIGINT NOT NULL COMMENT '提问学生ID',
    images VARCHAR(1000) COMMENT '图片附件(JSON数组)',
    tags VARCHAR(500) COMMENT '标签',
    view_count INT DEFAULT 0 COMMENT '浏览次数',
    answer_count INT DEFAULT 0 COMMENT '回答数量',
    status ENUM('UNANSWERED', 'ANSWERED', 'DELETED') DEFAULT 'UNANSWERED' COMMENT '状态',
    is_urgent TINYINT DEFAULT 0 COMMENT '是否紧急',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_course_id (course_id),
    INDEX idx_student_id (student_id),
    INDEX idx_status (status),
    INDEX idx_create_time (create_time)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='问题表';
```

#### 4.1.6 回答表 (answer)
```sql
CREATE TABLE answer (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',
    question_id BIGINT NOT NULL COMMENT '问题ID',
    teacher_id BIGINT NOT NULL COMMENT '回答教师ID',
    content TEXT NOT NULL COMMENT '回答内容',
    images VARCHAR(1000) COMMENT '图片附件(JSON数组)',
    like_count INT DEFAULT 0 COMMENT '点赞数',
    status TINYINT DEFAULT 1 COMMENT '状态 1:正常 0:已删除',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    update_time DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_question_id (question_id),
    INDEX idx_teacher_id (teacher_id),
    INDEX idx_create_time (create_time)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='回答表';
```

#### 4.1.7 通知表 (notification)
```sql
CREATE TABLE notification (
    id BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键ID',
    user_id BIGINT NOT NULL COMMENT '接收用户ID',
    type ENUM('ANSWER', 'SYSTEM', 'AUDIT') NOT NULL COMMENT '通知类型',
    title VARCHAR(200) NOT NULL COMMENT '通知标题',
    content TEXT COMMENT '通知内容',
    related_id BIGINT COMMENT '关联ID(问题ID/资源ID等)',
    is_read TINYINT DEFAULT 0 COMMENT '是否已读',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    INDEX idx_user_id (user_id),
    INDEX idx_is_read (is_read),
    INDEX idx_create_time (create_time)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='通知表';
```

### 4.2 实体关系说明

#### 4.2.1 一对多关系

1. **用户(SYS_USER) → 学习资源(LEARNING_RESOURCE)**
   - 关系：一个用户可以上传多个学习资源
   - 逻辑外键：`learning_resource.uploader_id` → `sys_user.id`
   - 维护策略：由应用服务层校验上传者存在性并在删除用户时同步处理资源

2. **用户(SYS_USER) → 问题(QUESTION)**
   - 关系：一个学生可以提出多个问题
   - 逻辑外键：`question.student_id` → `sys_user.id`
   - 维护策略：学生删除或禁用时由业务逻辑同步处理其问题

3. **用户(SYS_USER) → 回答(ANSWER)**
   - 关系：一个教师可以回答多个问题
   - 逻辑外键：`answer.teacher_id` → `sys_user.id`
   - 维护策略：教师账号状态变化时由服务层统一清理或转移回答

4. **用户(SYS_USER) → 通知(NOTIFICATION)**
   - 关系：一个用户可以接收多条通知
   - 逻辑外键：`notification.user_id` → `sys_user.id`
   - 维护策略：通知发送前校验用户存在，删除用户时做逻辑清理

5. **课程(COURSE) → 学习资源(LEARNING_RESOURCE)**
   - 关系：一个课程下可以有多个学习资源
   - 逻辑外键：`learning_resource.course_id` → `course.id`
   - 维护策略：课程删除前由业务流程检查并迁移相关资源

6. **课程(COURSE) → 问题(QUESTION)**
   - 关系：一个课程下可以有多个问题
   - 逻辑外键：`question.course_id` → `course.id`
   - 维护策略：课程调整时同步更新或归档相关问题

7. **问题(QUESTION) → 回答(ANSWER)**
   - 关系：一个问题可以有多个回答
   - 逻辑外键：`answer.question_id` → `question.id`
   - 维护策略：问题删除或关闭时由服务层批量更新回答状态

#### 4.2.2 多对多关系

1. **教师(SYS_USER) ↔ 课程(COURSE)**
   - 关系：一个教师可以教授多门课程，一门课程可以由多个教师教授
   - 中间表：`teacher_course`
   - 逻辑外键1：`teacher_course.teacher_id` → `sys_user.id`
   - 逻辑外键2：`teacher_course.course_id` → `course.id`
   - 唯一约束：`(teacher_id, course_id)` 联合唯一


## 五、接口设计规范

### 5.1 RESTful API设计原则
- 使用标准HTTP方法（GET、POST、PUT、DELETE）
- 统一的响应格式
- 使用HTTP状态码表示请求状态
- API版本控制：`/api/v1/...`

### 5.2 统一响应格式
```json
{
    "code": 200,
    "message": "success",
    "data": {},
    "timestamp": 1700000000000
}
```

### 5.3 核心API接口列表

#### 5.3.1 认证模块
- `POST /api/v1/auth/register` - 学生注册
- `POST /api/v1/auth/login` - 用户登录
- `POST /api/v1/auth/logout` - 用户登出
- `POST /api/v1/auth/refresh-token` - 刷新Token
- `POST /api/v1/auth/forgot-password` - 忘记密码
- `POST /api/v1/auth/reset-password` - 重置密码

#### 5.3.2 用户模块
- `GET /api/v1/users/profile` - 获取个人信息
- `PUT /api/v1/users/profile` - 更新个人信息
- `PUT /api/v1/users/avatar` - 更新头像
- `PUT /api/v1/users/password` - 修改密码

#### 5.3.3 课程模块
- `GET /api/v1/courses` - 获取课程列表
- `GET /api/v1/courses/{id}` - 获取课程详情
- `POST /api/v1/courses` - 创建课程(管理员)
- `PUT /api/v1/courses/{id}` - 更新课程(管理员)
- `DELETE /api/v1/courses/{id}` - 删除课程(管理员)
- `GET /api/v1/courses/{id}/teachers` - 获取课程教师
- `POST /api/v1/courses/{id}/teachers` - 分配教师(管理员)

#### 5.3.4 资源模块
- `GET /api/v1/resources` - 获取资源列表
- `GET /api/v1/resources/{id}` - 获取资源详情
- `POST /api/v1/resources` - 上传资源
- `PUT /api/v1/resources/{id}` - 更新资源信息
- `DELETE /api/v1/resources/{id}` - 删除资源
- `GET /api/v1/resources/{id}/download` - 下载资源
- `GET /api/v1/resources/my-uploads` - 我上传的资源

#### 5.3.5 问答模块
- `GET /api/v1/questions` - 获取问题列表
- `GET /api/v1/questions/{id}` - 获取问题详情
- `POST /api/v1/questions` - 提交问题
- `PUT /api/v1/questions/{id}` - 更新问题
- `DELETE /api/v1/questions/{id}` - 删除问题
- `GET /api/v1/questions/my-questions` - 我的提问
- `POST /api/v1/questions/{id}/answers` - 回答问题
- `PUT /api/v1/answers/{id}` - 更新回答
- `DELETE /api/v1/answers/{id}` - 删除回答
- `GET /api/v1/answers/my-answers` - 我的回答

#### 5.3.6 通知模块
- `GET /api/v1/notifications` - 获取通知列表
- `GET /api/v1/notifications/unread-count` - 获取未读数量
- `PUT /api/v1/notifications/{id}/read` - 标记已读
- `PUT /api/v1/notifications/read-all` - 全部已读

#### 5.3.7 管理员模块
- `GET /api/v1/admin/teachers` - 教师列表
- `POST /api/v1/admin/teachers` - 添加教师
- `PUT /api/v1/admin/teachers/{id}` - 更新教师
- `DELETE /api/v1/admin/teachers/{id}` - 删除教师
- `GET /api/v1/admin/students` - 学生列表
- `GET /api/v1/admin/statistics` - 系统统计数据


## 七、前端页面结构

### 7.1 公共页面
- 登录页 (`/login`)
- 注册页 (`/register`)
- 忘记密码页 (`/forgot-password`)
- 404页面 (`/404`)

### 7.2 学生端页面
- 首页 (`/student/home`)
- 课程列表 (`/student/courses`)
- 资源浏览 (`/student/resources`)
- 资源详情 (`/student/resources/:id`)
- 资源上传 (`/student/upload`)
- 问答广场 (`/student/questions`)
- 问题详情 (`/student/questions/:id`)
- 提问页 (`/student/ask`)
- 个人中心 (`/student/profile`)
  - 我的资源
  - 我的提问
  - 我的消息
  - 账号设置

### 7.3 教师端页面
- 首页 (`/teacher/home`)
- 课程管理 (`/teacher/courses`)
- 资源管理 (`/teacher/resources`)
- 发布资源 (`/teacher/publish`)
- 问答管理 (`/teacher/questions`)
- 待回答问题 (`/teacher/pending-questions`)
- 个人中心 (`/teacher/profile`)
  - 我的资源
  - 我的回答
  - 课程统计
  - 账号设置

### 7.4 管理员端页面
- 仪表盘 (`/admin/dashboard`)
- 课程管理 (`/admin/courses`)
- 教师管理 (`/admin/teachers`)
- 学生管理 (`/admin/students`)
- 资源管理 (`/admin/resources`)
- 问答管理 (`/admin/questions`)
- 系统设置 (`/admin/settings`)

### 7.5 角色界面区分方案

#### 7.5.1 实现方案

**方案一：路由级别区分（推荐）**

通过不同的路由前缀区分三种角色的界面：

```javascript
// router/index.js
const routes = [
  // 公共路由
  { path: '/login', component: Login },
  { path: '/register', component: Register },
  
  // 学生路由
  {
    path: '/student',
    component: StudentLayout,
    meta: { requiresAuth: true, role: 'STUDENT' },
    children: [
      { path: 'home', component: StudentHome },
      { path: 'resources', component: ResourceList },
      // ...其他学生页面
    ]
  },
  
  // 教师路由
  {
    path: '/teacher',
    component: TeacherLayout,
    meta: { requiresAuth: true, role: 'TEACHER' },
    children: [
      { path: 'home', component: TeacherHome },
      { path: 'questions', component: QuestionManage },
      // ...其他教师页面
    ]
  },
  
  // 管理员路由
  {
    path: '/admin',
    component: AdminLayout,
    meta: { requiresAuth: true, role: 'ADMIN' },
    children: [
      { path: 'dashboard', component: Dashboard },
      { path: 'courses', component: CourseManage },
      // ...其他管理员页面
    ]
  }
]
```

**方案二：组件级别区分（可选）**

同一路由根据角色渲染不同组件：

```vue
<!-- Home.vue -->
<template>
  <StudentHome v-if="userRole === 'STUDENT'" />
  <TeacherHome v-if="userRole === 'TEACHER'" />
  <AdminDashboard v-if="userRole === 'ADMIN'" />
</template>
```

#### 7.5.2 登录后跳转逻辑

```javascript
// 登录成功后根据角色跳转
async function handleLogin() {
  const response = await login(username, password)
  const userRole = response.data.role
  
  // 保存用户信息和Token
  store.commit('setUser', response.data)
  localStorage.setItem('token', response.data.token)
  
  // 根据角色跳转到对应首页
  switch(userRole) {
    case 'STUDENT':
      router.push('/student/home')
      break
    case 'TEACHER':
      router.push('/teacher/home')
      break
    case 'ADMIN':
      router.push('/admin/dashboard')
      break
    default:
      router.push('/login')
  }
}
```

#### 7.5.3 路由守卫（权限控制）

```javascript
// router/index.js
router.beforeEach((to, from, next) => {
  const token = localStorage.getItem('token')
  const userRole = store.state.user.role
  
  // 1. 检查是否需要登录
  if (to.meta.requiresAuth && !token) {
    return next('/login')
  }
  
  // 2. 检查角色权限
  if (to.meta.role && to.meta.role !== userRole) {
    // 无权限访问，跳转到对应角色首页
    switch(userRole) {
      case 'STUDENT':
        return next('/student/home')
      case 'TEACHER':
        return next('/teacher/home')
      case 'ADMIN':
        return next('/admin/dashboard')
      default:
        return next('/login')
    }
  }
  
  // 3. 已登录用户访问登录页，重定向到首页
  if (to.path === '/login' && token) {
    switch(userRole) {
      case 'STUDENT':
        return next('/student/home')
      case 'TEACHER':
        return next('/teacher/home')
      case 'ADMIN':
        return next('/admin/dashboard')
    }
  }
  
  next()
})
```

#### 7.5.4 布局组件区分

**学生端布局 (StudentLayout.vue)**
```vue
<template>
  <el-container>
    <el-header>
      <div class="logo">学习资源共享平台 - 学生端</div>
      <el-menu mode="horizontal" router>
        <el-menu-item index="/student/home">首页</el-menu-item>
        <el-menu-item index="/student/courses">课程中心</el-menu-item>
        <el-menu-item index="/student/resources">资源浏览</el-menu-item>
        <el-menu-item index="/student/questions">问答广场</el-menu-item>
      </el-menu>
      <div class="user-info">
        <el-badge :value="notificationCount">
          <el-icon><Bell /></el-icon>
        </el-badge>
        <el-dropdown>
          <span>{{ username }}</span>
          <template #dropdown>
            <el-dropdown-menu>
              <el-dropdown-item @click="goToProfile">个人中心</el-dropdown-item>
              <el-dropdown-item @click="logout">退出登录</el-dropdown-item>
            </el-dropdown-menu>
          </template>
        </el-dropdown>
      </div>
    </el-header>
    <el-main>
      <router-view />
    </el-main>
  </el-container>
</template>
```

**教师端布局 (TeacherLayout.vue)**
```vue
<template>
  <el-container>
    <el-header>
      <div class="logo">学习资源共享平台 - 教师端</div>
      <el-menu mode="horizontal" router>
        <el-menu-item index="/teacher/home">首页</el-menu-item>
        <el-menu-item index="/teacher/courses">我的课程</el-menu-item>
        <el-menu-item index="/teacher/resources">资源管理</el-menu-item>
        <el-menu-item index="/teacher/questions">问答管理</el-menu-item>
        <el-menu-item index="/teacher/pending-questions">
          <el-badge :value="pendingCount" class="item">
            待回答问题
          </el-badge>
        </el-menu-item>
      </el-menu>
      <div class="user-info">
        <el-dropdown>
          <span>{{ username }} (教师)</span>
          <template #dropdown>
            <el-dropdown-menu>
              <el-dropdown-item @click="goToProfile">个人中心</el-dropdown-item>
              <el-dropdown-item @click="logout">退出登录</el-dropdown-item>
            </el-dropdown-menu>
          </template>
        </el-dropdown>
      </div>
    </el-header>
    <el-main>
      <router-view />
    </el-main>
  </el-container>
</template>
```

**管理员端布局 (AdminLayout.vue)**
```vue
<template>
  <el-container>
    <el-aside width="200px">
      <div class="logo">管理后台</div>
      <el-menu router default-active="/admin/dashboard">
        <el-menu-item index="/admin/dashboard">
          <el-icon><DataAnalysis /></el-icon>
          <span>数据统计</span>
        </el-menu-item>
        <el-menu-item index="/admin/courses">
          <el-icon><Reading /></el-icon>
          <span>课程管理</span>
        </el-menu-item>
        <el-menu-item index="/admin/teachers">
          <el-icon><User /></el-icon>
          <span>教师管理</span>
        </el-menu-item>
        <el-menu-item index="/admin/students">
          <el-icon><User /></el-icon>
          <span>学生管理</span>
        </el-menu-item>
        <el-menu-item index="/admin/resources">
          <el-icon><Document /></el-icon>
          <span>资源管理</span>
        </el-menu-item>
        <el-menu-item index="/admin/questions">
          <el-icon><ChatDotRound /></el-icon>
          <span>问答管理</span>
        </el-menu-item>
        <el-menu-item index="/admin/settings">
          <el-icon><Setting /></el-icon>
          <span>系统设置</span>
        </el-menu-item>
      </el-menu>
    </el-aside>
    <el-container>
      <el-header>
        <el-breadcrumb separator="/">
          <el-breadcrumb-item>管理后台</el-breadcrumb-item>
          <el-breadcrumb-item>{{ currentPage }}</el-breadcrumb-item>
        </el-breadcrumb>
        <div class="user-info">
          <span>管理员：{{ username }}</span>
          <el-button @click="logout">退出</el-button>
        </div>
      </el-header>
      <el-main>
        <router-view />
      </el-main>
    </el-container>
  </el-container>
</template>
```

#### 7.5.5 后端权限验证

**Spring Security配置**
```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
            .authorizeHttpRequests(auth -> auth
                // 公共接口
                .requestMatchers("/api/v1/auth/**").permitAll()
                
                // 学生接口
                .requestMatchers("/api/v1/student/**").hasRole("STUDENT")
                
                // 教师接口
                .requestMatchers("/api/v1/teacher/**").hasRole("TEACHER")
                
                // 管理员接口
                .requestMatchers("/api/v1/admin/**").hasRole("ADMIN")
                
                // 共享接口（多角色）
                .requestMatchers("/api/v1/courses/**").hasAnyRole("STUDENT", "TEACHER", "ADMIN")
                .requestMatchers("/api/v1/resources/**").hasAnyRole("STUDENT", "TEACHER")
                
                .anyRequest().authenticated()
            )
            .addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);
        
        return http.build();
    }
}
```

**接口层权限注解**
```java
@RestController
@RequestMapping("/api/v1/admin")
@PreAuthorize("hasRole('ADMIN')")
public class AdminController {
    // 管理员专用接口
}

@RestController
@RequestMapping("/api/v1/teacher")
@PreAuthorize("hasRole('TEACHER')")
public class TeacherController {
    // 教师专用接口
}

@RestController
@RequestMapping("/api/v1/student")
@PreAuthorize("hasRole('STUDENT')")
public class StudentController {
    // 学生专用接口
}
```

#### 7.5.6 界面功能对比

| 功能模块 | 学生端 | 教师端 | 管理员端 |
|---------|--------|--------|----------|
| 浏览课程 | ✅ | ✅ | ✅ |
| 浏览资源 | ✅ | ✅ | ✅ |
| 上传资源 | ✅（普通权限） | ✅（可设置可见性） | ❌ |
| 下载资源 | ✅ | ✅ | ✅ |
| 提出问题 | ✅ | ❌ | ❌ |
| 回答问题 | ❌ | ✅ | ❌ |
| 课程管理 | ❌ | ❌ | ✅ |
| 教师管理 | ❌ | ❌ | ✅ |
| 学生管理 | ❌ | ❌ | ✅ |
| 内容审核 | ❌ | ❌ | ✅ |
| 数据统计 | 个人数据 | 课程数据 | 全站数据 |

#### 7.5.7 实现要点总结

1. **路由隔离**：使用不同路由前缀 (`/student`, `/teacher`, `/admin`)
2. **布局区分**：三种角色使用不同的Layout组件
3. **权限控制**：前端路由守卫 + 后端接口权限双重验证
4. **登录跳转**：根据用户角色自动跳转到对应首页
5. **菜单显示**：不同角色看到不同的导航菜单
6. **功能限制**：通过角色判断显示/隐藏特定功能按钮
7. **数据过滤**：后端根据角色返回对应权限的数据

---

## 八、后端项目结构

```
springboot-learning-system/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   └── com/
│   │   │       └── learning/
│   │   │           ├── LearningSystemApplication.java
│   │   │           ├── config/              # 配置类
│   │   │           │   ├── SecurityConfig.java
│   │   │           │   ├── WebMvcConfig.java
│   │   │           │   ├── MyBatisPlusConfig.java
│   │   │           │   └── SwaggerConfig.java
│   │   │           ├── controller/          # 控制器
│   │   │           │   ├── AuthController.java
│   │   │           │   ├── UserController.java
│   │   │           │   ├── CourseController.java
│   │   │           │   ├── ResourceController.java
│   │   │           │   ├── QuestionController.java
│   │   │           │   ├── AnswerController.java
│   │   │           │   ├── NotificationController.java
│   │   │           │   └── AdminController.java
│   │   │           ├── service/             # 服务层
│   │   │           │   ├── IUserService.java
│   │   │           │   ├── ICourseService.java
│   │   │           │   ├── IResourceService.java
│   │   │           │   ├── IQuestionService.java
│   │   │           │   ├── IAnswerService.java
│   │   │           │   ├── INotificationService.java
│   │   │           │   └── impl/            # 服务实现
│   │   │           ├── mapper/              # MyBatis Mapper
│   │   │           │   ├── UserMapper.java
│   │   │           │   ├── CourseMapper.java
│   │   │           │   ├── ResourceMapper.java
│   │   │           │   ├── QuestionMapper.java
│   │   │           │   └── AnswerMapper.java
│   │   │           ├── entity/              # 实体类
│   │   │           │   ├── User.java
│   │   │           │   ├── Course.java
│   │   │           │   ├── Resource.java
│   │   │           │   ├── Question.java
│   │   │           │   ├── Answer.java
│   │   │           │   └── Notification.java
│   │   │           ├── dto/                 # 数据传输对象
│   │   │           ├── vo/                  # 视图对象
│   │   │           ├── common/              # 公共类
│   │   │           │   ├── Result.java      # 统一返回结果
│   │   │           │   ├── PageResult.java  # 分页结果
│   │   │           │   └── constant/        # 常量类
│   │   │           ├── exception/           # 异常处理
│   │   │           │   ├── GlobalExceptionHandler.java
│   │   │           │   └── BusinessException.java
│   │   │           ├── security/            # 安全相关
│   │   │           │   ├── JwtTokenProvider.java
│   │   │           │   ├── JwtAuthenticationFilter.java
│   │   │           │   └── UserDetailsServiceImpl.java
│   │   │           └── util/                # 工具类
│   │   │               ├── FileUtil.java
│   │   │               ├── PasswordUtil.java
│   │   │               └── ValidationUtil.java
│   │   └── resources/
│   │       ├── application.yml              # 配置文件
│   │       ├── application-dev.yml          # 开发环境
│   │       ├── application-prod.yml         # 生产环境
│   │       ├── mapper/                      # MyBatis XML
│   │       └── static/                      # 静态资源
│   └── test/                                # 测试代码
├── pom.xml                                  # Maven配置
└── README.md
```

---

## 九、前端项目结构

```
vue-learning-system/
├── public/
│   ├── favicon.ico
│   └── index.html
├── src/
│   ├── main.js                    # 入口文件
│   ├── App.vue                    # 根组件
│   ├── assets/                    # 静态资源
│   │   ├── images/
│   │   ├── icons/
│   │   └── styles/
│   │       ├── base.css
│   │       ├── main.css
│   │       └── variables.css
│   ├── components/                # 公共组件
│   │   ├── common/
│   │   │   ├── Header.vue
│   │   │   ├── Footer.vue
│   │   │   ├── Sidebar.vue
│   │   │   ├── Breadcrumb.vue
│   │   │   └── Pagination.vue
│   │   ├── file/
│   │   │   ├── FileUpload.vue
│   │   │   └── FilePreview.vue
│   │   └── editor/
│   │       └── RichTextEditor.vue
│   ├── views/                     # 页面视图
│   │   ├── auth/
│   │   │   ├── Login.vue
│   │   │   ├── Register.vue
│   │   │   └── ForgotPassword.vue
│   │   ├── student/
│   │   │   ├── Home.vue
│   │   │   ├── CourseList.vue
│   │   │   ├── ResourceList.vue
│   │   │   ├── ResourceDetail.vue
│   │   │   ├── UploadResource.vue
│   │   │   ├── QuestionList.vue
│   │   │   ├── QuestionDetail.vue
│   │   │   ├── AskQuestion.vue
│   │   │   └── Profile/
│   │   ├── teacher/
│   │   │   ├── Home.vue
│   │   │   ├── CourseManage.vue
│   │   │   ├── ResourceManage.vue
│   │   │   ├── PublishResource.vue
│   │   │   ├── QuestionManage.vue
│   │   │   └── Profile/
│   │   └── admin/
│   │       ├── Dashboard.vue
│   │       ├── CourseManage.vue
│   │       ├── TeacherManage.vue
│   │       ├── StudentManage.vue
│   │       ├── ResourceManage.vue
│   │       └── QuestionManage.vue
│   ├── router/                    # 路由配置
│   │   └── index.js
│   ├── store/                     # Pinia状态管理
│   │   ├── index.js
│   │   ├── modules/
│   │   │   ├── user.js
│   │   │   ├── course.js
│   │   │   ├── resource.js
│   │   │   └── notification.js
│   ├── api/                       # API接口
│   │   ├── request.js             # Axios配置
│   │   ├── auth.js
│   │   ├── user.js
│   │   ├── course.js
│   │   ├── resource.js
│   │   ├── question.js
│   │   └── notification.js
│   ├── utils/                     # 工具函数
│   │   ├── auth.js                # Token管理
│   │   ├── validate.js            # 表单验证
│   │   ├── format.js              # 格式化工具
│   │   └── constants.js           # 常量
│   └── plugins/                   # 插件
│       └── element-plus.js
├── .env.development               # 开发环境变量
├── .env.production                # 生产环境变量
├── jsconfig.json
├── package.json
├── vite.config.js
└── README.md
```

---

## 十、开发计划与里程碑

### 第一阶段：项目初始化（1周）
- [x] 需求分析与文档编写
- [ ] 数据库设计与建表
- [ ] 后端项目框架搭建
- [ ] 前端项目框架搭建
- [ ] 开发环境配置

### 第二阶段：核心功能开发（4-5周）

#### Week 1: 用户认证与基础功能
- [ ] 用户注册、登录、登出
- [ ] JWT认证集成
- [ ] 用户信息管理
- [ ] 角色权限控制

#### Week 2: 课程与教师管理
- [ ] 课程CRUD功能
- [ ] 教师管理功能
- [ ] 课程教师关联
- [ ] 管理员后台页面

#### Week 3: 资源管理
- [ ] 文件上传功能
- [ ] 资源浏览与搜索
- [ ] 资源详情与下载

#### Week 4: 问答系统
- [ ] 提问功能
- [ ] 回答功能
- [ ] 问答列表与搜索
- [ ] 问答详情页

#### Week 5: 通知与个人中心
- [ ] 通知系统
- [ ] 学生个人中心
- [ ] 教师个人中心
- [ ] 数据统计功能

### 第三阶段：测试与优化（2周）
- [ ] 单元测试
- [ ] 集成测试
- [ ] 性能优化
- [ ] 安全测试
- [ ] UI/UX优化

### 第四阶段：部署与上线（1周）
- [ ] 生产环境配置
- [ ] 数据库迁移
- [ ] 服务器部署
- [ ] 域名配置
- [ ] 上线测试

---

## 十一、技术难点与解决方案

### 11.1 文件上传与存储
**难点**: 大文件上传、断点续传、文件类型校验

**解决方案**:
- 使用分片上传技术
- 前端使用SparkMD5计算文件hash
- 后端使用OSS对象存储或本地存储
- 实现文件秒传功能

### 11.2 权限控制
**难点**: 细粒度权限控制、资源可见性控制

**解决方案**:
- 使用Spring Security + JWT
- 自定义注解实现接口权限校验
- 数据层面实现资源可见性过滤

### 11.3 实时通知
**难点**: 消息实时推送

**解决方案**:
- 使用WebSocket实现实时通知
- 轮询方式作为降级方案
- 未读消息持久化存储

### 11.4 全文搜索
**难点**: 资源和问答的高效搜索

**解决方案**:
- 使用MySQL全文索引
- 或集成Elasticsearch（可选）
- 实现分词和高亮显示

### 11.5 并发控制
**难点**: 下载计数、点赞等并发更新

**解决方案**:
- 使用Redis计数器
- 定时同步到MySQL
- 乐观锁防止数据冲突

---

## 十二、部署方案

### 12.1 开发环境
- 本地MySQL数据库
- 本地文件存储
- 前后端分离开发
- 热重载支持

### 12.2 生产环境
- 服务器：阿里云ECS / 腾讯云
- 数据库：MySQL 8.0（RDS）
- 文件存储：OSS对象存储
- 反向代理：Nginx
- 容器化：Docker（可选）

### 12.3 部署步骤
1. 服务器环境准备（JDK、MySQL、Nginx）
2. 数据库初始化
3. 后端应用打包部署
4. 前端项目打包
5. Nginx配置静态资源和反向代理
6. 域名解析和HTTPS配置

---

## 十四、附录

### 14.1 参考文档
- Spring Boot官方文档
- Vue 3官方文档
- Element Plus组件库文档
- MySQL 8.0文档

### 14.2 开发规范
- 遵循Vue风格指南
- Git提交规范（Conventional Commits）
- 代码注释规范

### 14.3 测试账号（开发测试用）
```
管理员账号:
username: admin
password: admin123

教师账号:
username: teacher001
password: teacher123

学生账号:
username: student001
password: student123
```

---

**文档版本**: v1.0
**编写日期**: 2025-11-20
**最后更新**: 2025-11-20
**编写人**: GitHub Copilot
**审核状态**: 待审核

---

## 变更记录

| 版本 | 日期 | 修改人 | 修改内容 |
|------|------|--------|----------|
| v1.0 | 2025-11-20 | GitHub Copilot | 初始版本创建 |

